# Changelog

## [2.0.2] - 2025-12-04

### Added
- **Suggestions automatiques pour les conflits CNCJ (√âtape 6)** : Extension du syst√®me de suggestions de l'√©tape 4 √† l'√©tape 6
  - Bouton "üí° [code]" pour chaque conflit CNCJ proposant un code +1
  - V√©rification que le code sugg√©r√© n'existe pas dans les codes PCG/CNCJ
  - Incr√©mentation automatique jusqu'√† trouver un code libre dans la dizaine
  - Bouton "‚ú® Valider les suggestions" pour appliquer toutes les suggestions en un clic

- **Avertissements pr√©cis pour les erreurs de suggestion**
  - Badge "‚ö†Ô∏è Code finit par 9" (rouge) : quand le code original se termine par 9
  - Badge "‚ö†Ô∏è Plage XXXXXXX-XXXXXXX satur√©e" (orange) : quand tous les codes de la dizaine sont utilis√©s
  - Tooltip explicatif pour guider l'utilisateur vers une saisie manuelle

- **Statuts dynamiques pour les conflits CNCJ** : Remplacement du statut fixe par des statuts contextuels
  - ‚úÖ Code de remplacement valide (vert) : code saisi valide
  - üîí Validation forc√©e (bleu) : case "Forcer" coch√©e
  - ‚ö†Ô∏è Code saisi existe dans CNCJ (rouge) : conflit avec codes CNCJ
  - ‚ö†Ô∏è Code saisi en doublon (rouge) : code d√©j√† utilis√© ailleurs
  - ‚è≥ En attente de correction (orange) : aucun code saisi

### Changed
- La case "Forcer la validation" n'appara√Æt plus si un code de remplacement valide est saisi
- Le bouton "Valider les suggestions" est maintenant disponible aux √©tapes 4 ET 6
- Am√©lioration de la clart√© des messages d'erreur avec distinction entre "code finit par 9" et "plage satur√©e"

### Technical Details
- Ajout de `cncjSuggestions` dans `ResultsDisplay.tsx` utilisant `suggestNextCode` avec v√©rification des codes CNCJ
- Modification de `DuplicateRow.tsx` pour afficher les suggestions et statuts dynamiques pour `conflictType === 'cncj-conflicts'`
- Calcul de la plage (base, maxInRange) pour afficher les avertissements de saturation
- Utilisation de `useMemo` pour optimiser le calcul des suggestions CNCJ

### Documentation
- Mise √† jour de `CHANGELOG.md` avec les nouvelles fonctionnalit√©s
- Mise √† jour de `FEATURE-CODE-SUGGESTIONS.md` pour documenter l'extension √† l'√©tape 6
- Ajout de la section "Statuts Dynamiques (√âtape 6)" dans la documentation

> **Note** : Cette version am√©liore significativement l'exp√©rience utilisateur lors de la r√©solution des conflits CNCJ en proposant des suggestions automatiques et des retours visuels clairs sur l'√©tat de chaque correction.
